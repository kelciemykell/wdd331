var youtube_prefix="ba9b_",google_prefix="c822_";function getList(t){return new Promise((function(e,i){$.ajax({type:"GET",url:"https://preview.diigo.com/api/v3/awe/upload/?user_id="+t,dataType:"json",success:function(t){e(t)},error:function(t,e){i([t,e])}})}))}function initList(){DB.init().then(DB.getAll.bind(DB)).then((function(t){buildList(t)})),$("#delete-all").on("click",(function(t){t.preventDefault(),confirm("Are you sure to delete all the recordings?")&&DB.deleteAll().then(updateList)}))}function updateList(){DB.getAll().then(buildList)}function buildList(t){t=t.reverse();var e=$("#video-container");if(e.empty(),t.length){var i=$("#video-item-template").html();t.forEach((function(t){var n=t.detail,r=$(i);r.find("a").attr("href",chrome.runtime.getURL("/video-react.html?id="+t.id)),r.find(".thumbnail-img").attr("src",n.thumbnailUrl),r.find(".title").text(n.title).attr("title",n.title),r.find(".duration").text(n.duration),r.find(".size").text(n.size),r.attr("data-id",t.id),r.find(".delete-icon").on("click",(function(){confirm("Are you sure to delete this recording?")&&DB.delete(t.id).then(updateList)})),n.youtubeUrl&&r.addClass("shared_youtube"),n.gDriveUrl&&r.addClass("shared_gDrive"),n.awsUrl&&r.addClass("shared_aws"),r.appendTo(e)}))}}initList();