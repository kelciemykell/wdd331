(()=>{"use strict";var e,t={41985:(e,t,n)=>{n(29265);var r=n(19181),o=(n(5786),n(32074)),i=(n(3991),n(55026)),a=(n(27738),n(71577)),s=(n(74808),n(55852)),l=(n(47594),n(80923)),c=(n(17269),n(25779)),u=n(67294),d=n(73935),f=n(2877),p=n(8212),m=n(9669),h=n.n(m);n(27484);function v(e){window.open(e)}function g(e){var t=e.filename;"true"===localStorage["save-as"]&&localStorage.download_directory&&(e.filename=localStorage.download_directory+"/"+e.filename),chrome.downloads.download(e,(function(n){(void 0===n||chrome.runtime.lastError)&&function(e,t){var n=document.createElement("a"),r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.setAttribute("href",e),n.setAttribute("download",t),n.rel="noopener",n.dispatchEvent(r)}(e.url,t)}))}var b="https://www.awesomescreenshot.com",w="https://www.awesomescreenshot.com/api/v1",y=["/premium/stripe/create_plan","/premium/stripe/change_plan","/folder/create","/folder/add_items","/folder/change_name","/trash/throw_into","/image/change_title","/video/update_title","/trash/restore","/trash/delete","/image/upload"],j=h().create({baseURL:w});function x(){return(e=b,t=["screenshot_personal_fullname","screenshot_personal_type","screenshot_personal_mail","screenshot_peronal_premium_level"],new Promise((function(n,r){chrome.cookies.getAll({url:e},(function(e){if("string"==typeof t){var r=e.filter((function(e){return e.name===t}));n(r)}else if(Array.isArray(t)){var o=e.filter((function(e){return-1!==t.indexOf(e.name)}));n(o)}}))}))).then((function(e){if(e.length){var t={};return e.forEach((function(e){t[e.name]=e})),{username:decodeURI(t.screenshot_personal_fullname.value),type:t.screenshot_personal_type.value,mail:t.screenshot_personal_mail.value,premiumLevel:t.screenshot_personal_premium_level?t.screenshot_personal_premium_level.value:""}}return null}));var e,t}j.interceptors.request.use((function(e){return e}),(function(e){return i.ZP.error("Network error, Request timeout!"),Promise.reject()})),j.interceptors.response.use((function(e){if(e&&e.data&&1===e.data.code)return Promise.resolve(e.data.data);if(e.data.code,e.data.msg){if(-1!==y.indexOf(e.config.url))return Promise.reject(e.data.msg);if(i.ZP.error(e.data.msg),"/pricing"!==window.location.pathname)return Promise.reject(e.data.msg)}}),(function(e){var t=e.response.status;return i.ZP.error("Network error! Error Code "+t),Promise.reject(e)}));var S=n(89366),O=n(2603),N=n(85893);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,r,o=C(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).handleSubmit=t.handleSubmit.bind(R(t)),t.fp=t.fp.bind(R(t)),t}return t=i,(n=[{key:"handleSubmit",value:function(e){this.props.onSignInSubmit(e)}},{key:"fp",value:function(){v("https://www.awesomescreenshot.com/user/forgetPassword")}},{key:"render",value:function(){return(0,N.jsxs)(s.Z,{onFinish:this.handleSubmit,children:[(0,N.jsx)(s.Z.Item,{name:"email",rules:[{required:!0,message:"Please input your email!"}],children:(0,N.jsx)(c.Z,{size:"large",prefix:(0,N.jsx)(S.Z,{}),type:"email",placeholder:"Email"})}),(0,N.jsx)(s.Z.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:(0,N.jsx)(c.Z,{size:"large",prefix:(0,N.jsx)(O.Z,{}),type:"password",placeholder:"Password"})}),(0,N.jsx)("div",{className:"fp-box",children:(0,N.jsx)("a",{className:"fp",onClick:this.fp,children:"Forget Password"})}),(0,N.jsx)(s.Z.Item,{children:(0,N.jsx)(a.Z,{size:"large",type:"primary",loading:this.props.signInLoading,block:!0,htmlType:"submit",children:"Sign In"})})]})}}])&&P(t.prototype,n),r&&P(t,r),i}(u.Component);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(a,e);var t,n,r,o=M(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={isShowSignIn:!1,signInLoading:!1},t.enterSignIn=t.enterSignIn.bind(z(t)),t.handleSignInSubmit=t.handleSignInSubmit.bind(z(t)),t.handleConnectGoogle=t.handleConnectGoogle.bind(z(t)),t.goToSignUp=t.goToSignUp.bind(z(t)),t}return t=a,(n=[{key:"enterSignIn",value:function(e){e.preventDefault(),this.setState({isShowSignIn:!0})}},{key:"goToSignUp",value:function(){v("https://www.awesomescreenshot.com/user/login"),this.props.onCancel()}},{key:"handleSignInSubmit",value:function(e){var t,n,r=this;this.setState({signInLoading:!0}),(t=e,n=new URLSearchParams,n.append("mail",t.email),n.append("password",t.password),h()({method:"post",url:b+"/user/loginCommit?from=chrome_extension",data:n})).then((function(e){var t=e.data;0==t.ErrorCode?(t.S,r.setState({signInLoading:!1}),r.props.onSignInFinish()):(i.ZP.error(t.ErrorMsg),r.setState({signInLoading:!1}))})).catch((function(e){r.setState({signInLoading:!1}),i.ZP.error("Network error. Please try later.")}))}},{key:"handleConnectGoogle",value:function(){"web"==this.props.type?v(b+"/openid/auth2?redirect_url="+encodeURIComponent(document.URL)):v(b+"/openid/auth2?redirect_url="+encodeURIComponent(chrome.runtime.getURL("aws")))}},{key:"render",value:function(){var e=this.props.type,t=this.state.isShowSignIn;return(0,N.jsxs)("div",{className:"sign-in-panel",children:[(0,N.jsxs)("div",{className:"title",children:[(0,N.jsx)("div",{className:"logo",children:(0,N.jsx)("b",{})}),"Awesome Screenshot"]}),(0,N.jsx)("p",{className:"tip",children:function(e){return"aws"===e?"":"drive"===e?"You need to sign in to an Awesome Screenshot account in order to connect with cloud services.":"des"===e?"You need to sign in to an Awesome Screenshot account in order to connect with other services.":""}(e)}),(0,N.jsx)("div",{className:"box",children:t?(0,N.jsx)("div",{className:"signInForm",children:(0,N.jsx)(U,T(T({},this.state),{},{onSignInSubmit:this.handleSignInSubmit}))}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:"google-signin-btn",onClick:this.handleConnectGoogle,children:[(0,N.jsx)("div",{className:"icon",children:(0,N.jsx)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"18px",height:"18px",viewBox:"0 0 48 48",className:"abcRioButtonSvg",children:(0,N.jsxs)("g",{children:[(0,N.jsx)("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),(0,N.jsx)("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),(0,N.jsx)("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),(0,N.jsx)("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),(0,N.jsx)("path",{fill:"none",d:"M0 0h48v48H0z"})]})})}),(0,N.jsx)("span",{children:"Sign in with Google"})]}),(0,N.jsx)("div",{className:"sign-in-tip",children:(0,N.jsxs)("a",{onClick:this.enterSignIn,children:[(0,N.jsx)("b",{children:"Sign in"})," with email and password"]})}),(0,N.jsx)("div",{className:"sign-up-tip",children:(0,N.jsxs)("a",{onClick:this.goToSignUp,children:[(0,N.jsx)("b",{children:"Create account"})," with other email"]})})]})})]})}}])&&F(t.prototype,n),r&&F(t,r),a}(u.Component);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const W=function(e){return(0,N.jsx)(l.Z,Y(Y({},e),{},{footer:null,maskClosable:!1,wrapClassName:"sign-in",destroyOnClose:!0,centered:!0,children:(0,N.jsx)(q,Y({},e))}))};window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;var K=null;function Q(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}return t}const X={fs:null,getFs:function(){return new Promise((function(e,t){window.requestFileSystem(window.PERSISTENT,52428800,(function(t){e(t)}),(function(e){t(e)}))}))},save:function(e,t){var n=this;return this.getFs().then((function(r){return n.do_save(r,e,t)}),Q)},append:function(e,t){K?K.write(e):this.getFs().then((function(n){n.root.getFile(t,{create:!1},(function(t){t.createWriter((function(t){t.onwriteend=function(e){},t.onerror=function(e){},t.write(e),K=t}),(function(e){}))}),(function(e){}))}))},do_save:function(e,t,n){return new Promise((function(r,o){e.root.getFile(n,{create:!0},(function(e){e.createWriter((function(n){n.onwriteend=function(t){r(e.toURL())},n.onerror=function(e){o(e.toString())},n.write(t),K=n}),(function(e){o(e)}))}),(function(e){o(e)}))}))},getFile:function(e){var t=this;return new Promise((function(n,r){t.getFs().then((function(t){t.root.getFile(e,{},(function(e){e.file((function(e){n(e)}),r)}),r)}))}))}};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=c.Z.TextArea,oe=l.Z.confirm,ie=(chrome.extension.getBackgroundPage(),null),ae="";window.needUpload="",window.bindEvents=!1;var se=function(e){return(0,N.jsxs)(s.Z,{onFinish:function(t){e.onSubmit(t)},children:[(0,N.jsx)(s.Z.Item,{name:"title",rules:[{required:!0,message:"Title can't be empty!"}],initialValue:e.defaultValue,children:(0,N.jsx)(re,{})}),(0,N.jsxs)(s.Z.Item,{className:"video-edit-title-btn-area",children:[(0,N.jsx)(a.Z,{onClick:e.onCancel,children:"Cancel"}),(0,N.jsx)(a.Z,{type:"primary",htmlType:"submit",loading:e.isLoading,children:"Done"})]})]})},le=function(e){var t=chrome.extension.getBackgroundPage(),n=te((0,u.useState)(null),2),s=n[0],d=n[1],m=te((0,u.useState)("upload"),2),v=m[0],b=m[1],w=te((0,u.useState)("upload"),2),y=w[0],S=w[1],O=te((0,u.useState)("upload"),2),E=O[0],P=O[1],_=te((0,u.useState)(0),2),C=_[0],k=_[1],R=te((0,u.useState)(0),2),I=R[0],U=R[1],A=te((0,u.useState)(0),2),D=A[0],T=A[1],L=te((0,u.useState)(!1),2),F=L[0],Z=L[1],M=te((0,u.useState)(!1),2),B=M[0],z=M[1],V=te((0,u.useState)(!1),2),q=V[0],G=V[1],Y=te((0,u.useState)(t.googleOAuth.getAccount().email),2),J=Y[0],K=Y[1],Q=te((0,u.useState)(!1),2),H=Q[0],ne=Q[1],re=(0,u.useRef)(null);(0,u.useEffect)((function(){return null!==s&&""===s.detail.thumbnailUrl&&re.current.addEventListener("canplay",(function(){fe()})),document.addEventListener("visibilitychange",pe),function(){document.removeEventListener("visibilitychange",pe)}}),[s,v]),(0,u.useEffect)((function(){var e=new URLSearchParams(window.location.search);(ae=parseInt(e.get("id")))&&DB.init().then((function(){DB.get(ae).then((function(e){d(e),e.detail.youtubeUrl&&S("uploaded"),e.detail.gDriveUrl&&P("uploaded"),e.detail.awsUrl&&b("uploaded"),re.current.addEventListener("progress",t),re.current.currentTime=99999999}))}));var t=function e(){re.current.buffered.end(0)&&re.current.currentTime>0&&(re.current.currentTime=0,re.current.removeEventListener("progress",e))};chrome.cookies.get({url:"https://www.awesomescreenshot.com",name:"screenshot_personal_type"},(function(e){e?0==e.value&&ne(!0):ne(!0)}))}),[]);var le,ce,ue,de,fe=function(){var e=document.createElement("canvas");e.width=320,e.height=180;var t=e.getContext("2d"),n=re.current;t.drawImage(n,0,0,e.width,e.height);e.toBlob((function(e){X.save(e,s.id+"_thumbnail.png").then((function(e){var t=$($({},s),{},{detail:$($({},s.detail),{},{thumbnailUrl:e})});d(t),DB.update(ae,t)}))}))},pe=function(){"visible"===document.visibilityState&&window.needUpload&&ye()},me=function(e){return new Promise((function(t,n){var r="filesystem:"+chrome.extension.getURL("persistent/"),o=new RegExp(r),i=e.replace(o,"");X.getFile(i).then((function(e){t(e)}),(function(e){n("Get file error: ["+e+"]")}))}))},he=function(e,t){var n=$($({},s),{},{detail:$($({},s.detail),{},ee({},e+"Url",t))});d(n),DB.update(ae,n),"aws"===e&&chrome.tabs.create({url:t})},ve=function(e){U(e)},ge=function(e){T(e)},be=function(e,t,n){return new Promise((function(r,o){(function(e,t,n){var r=new FormData;for(var o in e)r.append(o,e[o]);var i=n||"https://awesomescreenshot.s3.amazonaws.com/";return h()({method:"POST",crossdomain:!0,url:i,data:r,onUploadProgress:function(e){var n=Math.round(100*e.loaded/e.total);t(n)}})})(e,t,n).then((function(){r()}),(function(e){o("S3 "+e.toString())}))}))},we=function(){x().then((function(e){if(e&&e.username){b("uploading");var n="";s&&s.detail?s.detail.title:window.needUpload.title,s&&s.detail?s.fileUrl:window.needUpload.fileUrl;window.needUpload="";var r={title:s.detail.title,userAgent:navigator.userAgent,client:/Edg/.test(navigator.userAgent)?"Edge extension":"chrome extension",extVersion:t.currentversion,screenSize:window.screen.width*window.devicePixelRatio+"*"+window.screen.height*window.devicePixelRatio,size:s.detail.size,duration:s.detail.duration,createUnix:Math.round(s.detail.timeStamp/1e3)+""};s.detail.recordType&&(r.recordType=s.detail.recordType),(o=r,j({method:"POST",url:"video/upload_init",data:o})).then((function(e){return n=e.videoID,me(s.fileUrl).then((function(t){var n={AWSAccessKeyId:"AKIAJSCJQ2NM3XLFPVKA",acl:"private",key:e.s3Key,"Content-Type":"video/webm",policy:e.policy,signature:e.signature,file:t};return be(n,k,e.s3URI)}),(function(e){return Promise.reject(e.toString())}))})).then((function(e){(function(e){return j({method:"POST",url:"/video/upload_complete",data:{videoID:e}})})(n).then((function(e){he("aws",e.videoURI),b("uploaded")}))})).catch((function(e){n&&function(e,t){j({method:"POST",url:"/video/upload_failed",data:{videoID:e,failedMessage:t}})}(n,e),b("upload")}))}else window.needUpload={title:s.detail.title,fileUrl:s.fileUrl},Z(!0);var o}))},ye=function(){Z(!1),we()},je=function(){z(!1)},xe=function(){chrome.tabs.create({url:s.detail.awsUrl})},Se=function(e){var t,n;t=e,(n=document.createElement("textarea")).value=t,n.style.position="absolute",n.style.top="-999999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),i.ZP.success("Link has been copied to your clipboard!")},Oe=function(e,t,n){if("youtube"===e)var r="#cc181e";else if("gDrive"===e)r="#4285f4";else r="";return(0,N.jsxs)("div",{className:"upload-area",children:["uploading"===t&&(0,N.jsx)(o.Z,{percent:n,status:"active",showInfo:!1,size:"small",strokeColor:r}),"uploaded"===t&&function(e){return"aws"===e?(0,N.jsxs)("div",{className:"view-btn",onClick:xe,children:[(0,N.jsx)("img",{className:"icon",src:"images/icon_viewOnAS.svg"}),"View on Awesome Screenshot"]}):(0,N.jsx)(c.Z,{defaultValue:s.detail[e+"Url"],prefix:(0,N.jsx)(f.Z,{}),onClick:Se.bind(null,s.detail[e+"Url"])})}(e)]})};return(0,N.jsx)("div",{className:"videoPage",children:s?(0,N.jsxs)("div",{className:"main-container",children:[(0,N.jsxs)("div",{className:"video-title",id:"video-title",children:[(0,N.jsx)("span",{className:"display-text",id:"display-text",title:"Edit name",onClick:function(){z(!0)},children:(0,N.jsxs)("span",{className:"text",children:[s.detail.title,(0,N.jsx)(p.Z,{})]})}),(0,N.jsxs)("div",{className:"video-action",children:[(0,N.jsxs)("div",{className:"video-action-btn list",onClick:function(){window.location.href="/video-list.html"},children:[(0,N.jsx)("div",{className:"icon"}),"My Local Recordings"]}),(0,N.jsxs)("div",{className:"video-action-btn delete",onClick:function(){oe({title:"Are you sure to delete this video?",okText:"Yes, delete",okType:"danger",cancelText:"No",onOk:function(){DB.delete(ae).then((function(e){window.location.href="/video-list.html"}))},onCancel:function(){}})},children:[(0,N.jsx)("div",{className:"icon"}),"Delete"]})]})]}),(0,N.jsxs)("div",{className:"video-container",children:[(0,N.jsxs)("div",{className:"video-box",children:[(0,N.jsx)("video",{id:"video",controls:!0,src:s.fileUrl,ref:re}),(0,N.jsx)("div",{className:"video-tip",children:"Note: this video is temporarily saved under My Local Recordings and might be lost due to unexpected system or browser error. You can upload this video to awesomescreenshot.com or download it to local to avoid any possible data loss. We suggest you choose the Cloud option to save your recording next time."})]}),(0,N.jsxs)("div",{className:"info-box",children:[(0,N.jsxs)("div",{className:"info-group",children:[(0,N.jsx)("div",{className:"group-title",children:"Video Information"}),(0,N.jsxs)("div",{className:"info-item",children:[(0,N.jsx)("div",{className:"info-item-title",children:"Date Created:"}),(0,N.jsx)("span",{id:"info-time",children:(le=new Date(s.detail.timeStamp),ce=le.getDate(),ue=le.getMonth(),de=le.getFullYear(),["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"][ue]+" "+ce+", "+de)})]}),(0,N.jsxs)("div",{className:"info-item",children:[(0,N.jsx)("div",{className:"info-item-title",children:"Video Length:"}),(0,N.jsx)("span",{id:"info-duration",children:s.detail.duration})]}),(0,N.jsxs)("div",{className:"info-item",children:[(0,N.jsx)("div",{className:"info-item-title",children:"Video Size:"}),(0,N.jsx)("span",{id:"info-size",children:s.detail.size})]})]}),(0,N.jsxs)("div",{className:"info-group",children:[(0,N.jsx)("div",{className:"group-title",children:"Save to Awesome Screenshot"}),(0,N.jsx)("div",{className:"info-group-box",children:"upload"===v?(0,N.jsx)(a.Z,{className:"uploadAwsBtn",block:!0,type:"primary",onClick:we,children:"Upload to get shareable link"}):Oe("aws",v,C)})]}),(0,N.jsxs)("div",{className:"info-group",children:[(0,N.jsx)("div",{className:"group-title",children:"Save to cloud"}),(0,N.jsxs)("div",{className:"upload-item",id:"youtube-upload",children:[(0,N.jsxs)("div",{className:"subtitle",children:[(0,N.jsx)("img",{src:"images/youtube.svg",alt:""}),"YouTube",(0,N.jsx)("div",{className:"upload-action",children:"uploaded"!==y&&(0,N.jsx)(a.Z,{type:"primary",size:"small",onClick:function(){return t.googleEvent("upload to youtube","local"),me(s.fileUrl).then((function(e){return ie||(ie=new File([e],s.detail.title+".webm",{type:"video/webm"})),S("uploading"),uploadVideo.uploadToYoutube(ie,ve)})).then((function(e){he("youtube","https://youtu.be/"+e.id),S("uploaded")})).catch((function(e){S("upload")}))},disabled:"upload"!==y,children:"upload"===y?"Upload":"Uploading"})})]}),(0,N.jsx)("div",{className:"upload-item-detail",children:Oe("youtube",y,I)})]}),(0,N.jsxs)("div",{className:"upload-item",id:"gDrive-upload",children:[(0,N.jsxs)("div",{className:"subtitle",children:[(0,N.jsx)("img",{src:"images/google-drive.svg",alt:""}),"Google Drive",(0,N.jsx)("div",{className:"upload-action",children:"uploaded"!==E&&(0,N.jsx)(a.Z,{type:"primary",size:"small",onClick:function(){return t.googleEvent("upload to google drive","local"),me(s.fileUrl).then((function(e){return ie||(ie=new File([e],s.detail.title+".webm",{type:"video/webm"})),P("uploading"),uploadVideo.uploadToGoogleDrive(ie,ge)})).then((function(e){he("gDrive",e.alternateLink),P("uploaded")})).catch((function(e){P("upload")}))},disabled:"upload"!==E,children:"upload"===E?"Upload":"Uploading"})})]}),(0,N.jsx)("div",{className:"upload-item-detail",children:Oe("gDrive",E,D)})]}),J&&(0,N.jsxs)("div",{className:"current-account",id:"current-account",children:["Current account:",(0,N.jsx)(r.Z,{content:(0,N.jsxs)("div",{className:"notice",id:"notice",children:["NOTICE: If you want to save video to another google account, please clear the authentication in awesome screenshot.",(0,N.jsx)("a",{className:"gdrive-signout",onClick:function(){t.googleOAuth.clearAccount(),K(""),G(!1)},children:"Click to clear Authentication"})]}),trigger:"click",visible:q,onVisibleChange:function(e){G(e)},children:(0,N.jsx)("span",{className:"current-account-email",id:"c-email",children:J})})]})]}),(0,N.jsxs)("div",{className:"info-group",children:[(0,N.jsx)("div",{className:"group-title",children:"Download"}),(0,N.jsx)("div",{className:"info-item",children:(0,N.jsxs)("div",{className:"subtitle",children:["In WebM format",(0,N.jsx)(a.Z,{className:"action-btn download-btn",type:"primary",size:"small",onClick:function(){chrome.permissions.request({permissions:["downloads"]},(function(e){e&&me(s.fileUrl).then((function(e){var t=s.detail.title.replace(/(\.|\:)/g," ").replace(/[#$~!@%^&*();'"?><\[\]{}\|,:\/=+]/g," ")+".webm";if(t=t.replace(/\s+/g,"-"),e.size<1442116762)try{!function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://cdn.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,r=new EBML.Decoder,o=EBML.tools,i=new FileReader;i.onload=function(e){r.decode(this.result).forEach((function(e){n.read(e)})),n.stop();var i=o.makeMetadataSeekable(n.metadatas,n.duration,n.cues),a=this.result.slice(n.metadataSize),s=new Blob([i,a],{type:"video/webm"});t(s)},i.readAsArrayBuffer(e)}(e,(function(e){g({url:URL.createObjectURL(e),filename:t,saveAs:!0})}))}catch(n){g({url:URL.createObjectURL(e),filename:t,saveAs:!0})}else g({url:URL.createObjectURL(e),filename:s.detail.title+".webm",saveAs:!0})}))})),t.googleEvent("download video","local")},children:"Download"})]})})]}),H&&(0,N.jsxs)("div",{className:"tip",children:["Recording length is limited to",(0,N.jsx)("span",{children:" 5 minutes"}),". Upgrade to unlock the unlimited recordings.",(0,N.jsx)("div",{children:(0,N.jsx)("a",{className:"upgrade-btn",id:"upgrade-btn",onClick:function(){chrome.extension.getBackgroundPage().goToUpgrade("Record_final")},children:"UPGRADE"})})]})]})]}),(0,N.jsx)(W,{visible:F,onCancel:function(){Z(!1)},onSignInFinish:ye}),(0,N.jsx)(l.Z,{title:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(p.Z,{className:"title-icon"}),(0,N.jsx)("span",{className:"title",children:"Edit Title"})]}),destroyOnClose:!0,maskClosable:!1,visible:B,className:"video-modal",footer:null,onCancel:je,children:(0,N.jsx)("div",{className:"edit-area",children:(0,N.jsx)(se,{defaultValue:s.detail.title,onCancel:je,onSubmit:function(e){var t=$($({},s),{},{detail:$($({},s.detail),{},{title:e.title})});d(t),DB.update(ae,t),z(!1)},isLoading:!1})})})]}):""})};d.render((0,N.jsx)(le,{}),document.getElementById("video-page-wrapper"))}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(c=0;c<e.length;c++){for(var[n,o,i]=e[c],s=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,i<a&&(a=i));s&&(e.splice(c--,1),t=o())}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={791:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,l]=n,c=0;for(o in s)r.o(s,o)&&(r.m[o]=s[o]);for(l&&l(r),t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[a[c]]=0;r.O()},n=self.webpackChunkAwesomeScreenshot=self.webpackChunkAwesomeScreenshot||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.O(void 0,[394,377,238,347,103,514,951,224,622],(()=>r(11008)));var o=r.O(void 0,[394,377,238,347,103,514,951,224,622],(()=>r(41985)));o=r.O(o)})();